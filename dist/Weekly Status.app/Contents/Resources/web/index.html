<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Weekly Status Tracker</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div class="page-shell">
      <header class="topbar">
        <div class="brand">
          <p class="eyebrow">Weekly status tracker</p>
          <h1>Weekly Status updates</h1>
          <p class="sub">One list per week. Reorder sections by drag or arrows. Saved locally on your machine.</p>
        </div>

        <div class="controls">
          <p class="controls-meta">
            <span class="controls-meta-label">Storage</span>
            <span id="storageMode" class="controls-meta-value">Project file</span>
          </p>

          <div class="controls-actions" role="group" aria-label="Global actions">
            <button id="exportBtn" class="btn" type="button">Export JSON</button>
            <button id="importBtn" class="btn ghost" type="button">Import JSON</button>
            <input id="importFile" type="file" accept="application/json" hidden />
          </div>
        </div>
      </header>

      <main class="stack">
        <div class="dashboard-grid">
          <section class="weeks-column" aria-label="Weekly tracker">
            <div class="week-nav top" role="group" aria-label="Add newer week">
              <button id="nextWeekBtn" class="btn primary" type="button">Next week</button>
            </div>

            <div id="weeksContainer" class="weeks" aria-label="Weeks"></div>

            <div class="week-nav bottom" role="group" aria-label="Add older week">
              <button id="previousWeekBtn" class="btn" type="button">Previous week</button>
            </div>
          </section>

          <aside id="tasksPanel" class="tasks-panel" aria-label="Task tracker">
            <div class="tasks-panel-head">
              <h2 class="tasks-title">Tasks tracker</h2>
              <p class="tasks-subtitle">Color-coded by status and priority</p>
            </div>

            <div class="tasks-controls" role="group" aria-label="Task controls">
              <button id="addTaskBtn" class="btn small" type="button">Add task</button>
              <label class="tasks-sort-label" for="taskSortSelect">Sort</label>
              <select id="taskSortSelect" class="task-sort-select" aria-label="Sort tasks">
                <option value="priority">Priority</option>
                <option value="status">Status</option>
                <option value="created_at">Date created</option>
              </select>
            </div>

            <div id="taskGridHead" class="task-grid-head" aria-hidden="true">
              <span class="task-col-label">Task</span>
              <span class="task-col-label">Status</span>
              <span class="task-col-label">Priority</span>
              <span class="task-col-label task-col-label-ghost"></span>
              <div id="taskResizeNameStatus" class="task-col-resizer task-col-resizer-name-status"></div>
              <div id="taskResizeStatusPriority" class="task-col-resizer task-col-resizer-status-priority"></div>
            </div>

            <ul id="tasksList" class="tasks-list" aria-label="Tasks"></ul>
            <p id="tasksEmptyHint" class="tasks-empty">No tasks yet. Add one to get started.</p>
          </aside>
        </div>
      </main>

      <template id="weekTemplate">
        <section class="week">
          <div class="week-head">
            <div class="week-heading">
              <h2 class="week-title"></h2>
              <div class="week-meta"></div>
            </div>
            <div class="week-actions">
              <button class="btn small danger" data-action="delete-week" type="button">Delete week</button>
              <button class="btn small" data-action="add" type="button">Add tile</button>
            </div>
          </div>
          <ul class="list" aria-label="Week tiles"></ul>
        </section>
      </template>

      <template id="tileTemplate">
        <li class="tile" draggable="true">
          <div class="tile-bar">
            <span class="drag-wrap">
              <span class="drag" title="Drag to reorder" aria-label="Drag tile">⋮⋮</span>
              <span class="drag-label">Drag</span>
            </span>
            <div class="tile-actions">
              <button class="icon" data-action="up" title="Move up" aria-label="Move tile up" type="button">↑</button>
              <button class="icon" data-action="down" title="Move down" aria-label="Move tile down" type="button">↓</button>
              <button class="icon" data-action="delete" title="Delete" aria-label="Delete tile" type="button">✕</button>
            </div>
          </div>
          <div class="tile-body" contenteditable="true" spellcheck="true" data-placeholder="Add a section like 'Last week' or 'Next week', then bullets..."></div>
        </li>
      </template>

      <template id="taskRowTemplate">
        <li class="task-row">
          <textarea class="task-name-input" rows="1" placeholder="Task name" aria-label="Task name"></textarea>
          <select class="task-status-select" aria-label="Task status">
            <option value="not_started">Not started</option>
            <option value="in_progress">In Progress</option>
            <option value="done">Done</option>
          </select>
          <select class="task-priority-select" aria-label="Task priority">
            <option value="P0">P0</option>
            <option value="P1">P1</option>
            <option value="P2">P2</option>
            <option value="P3">P3</option>
          </select>
          <button class="icon task-delete" data-action="delete-task" title="Delete task" aria-label="Delete task" type="button">✕</button>
        </li>
      </template>

      <footer class="footer">
        <span>Tip: drag tiles or use arrows to reorder. Edits auto-save.</span>
      </footer>
    </div>

    <script type="module" src="app.js"></script>
  </body>
</html>
